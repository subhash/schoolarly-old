<% include_table_filter %>
<script type="text/javascript">
    jQuery.noConflict();
    
    jQuery(document).ready(function(){
        var cols = {
            col_0: "none",
            col_3: "select"
        };
        
        var sort_cols = ['None', 'String', 'String', 'String', 'String']
        setTableFilter("filterTable", cols, sort_cols, true);
    });
</script>
<h1><%= I18n.t("tog_user.plugin_title") %></h1>
<p>
    <%= link_to I18n.t("tog_user.admin.create_user"),  new_admin_user_url, {:class => "button add", :title => I18n.t("tog_user.admin.create_user")} %>
</p>
<div class="wide">
    <table id="filterTable" class="tableE">
        <thead>
            <tr>
                <% [:login, :email, :name, :type, :state, :created_at].each do |field| %>
                <th scope="col">
                    <%= I18n.t("tog_user.model.#{field}") %>
                </th>
                <% end %>
                <th scope="col">
                </th>
            </tr>
        </thead>
        <tbody>
            <% @users.each do |user| %>
            <tr>
                <td nowrap="nowrap">
                    <%= link_to I18n.t("tog_user.model.login"), hijack_admin_user_path(user), :title =>  "#{I18n.t('tog_user.model.login')} #{user.email}" -%>
                </td>
                <td>
                    <strong><%= link_to user.login, edit_admin_user_url(user), {:title => I18n.t("tog_user.admin.edit_user")} -%></strong>
                </td>
                <td nowrap="nowrap">
                    <%= link_to user.profile.full_name, member_profile_path(user.profile) -%>
                </td>
			   <td nowrap="nowrap">
                    <%= user.person_type -%>
                </td>
                <td>
                    <%= I18n.t("tog_user.model.states.#{user.aasm_current_state}") %>
                </td>
                <td nowrap="nowrap">
                    <%= I18n.l(user.created_at, :format => :long) -%>
                </td>
            </tr>
            <% end %>
        </tbody>
    </table>
</div>
