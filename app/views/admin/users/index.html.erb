<% include_table_filter %>
<script type="text/javascript">
    jQuery.noConflict();
    
    jQuery(document).ready(function(){
        setTableFilter("filterTable", 5);
    });
</script>

<h1><%= I18n.t("tog_user.plugin_title") %></h1>
<p>
    <%= link_to I18n.t("tog_user.admin.create_user"),  new_admin_user_url, {:class => "button add", :title => I18n.t("tog_user.admin.create_user")} %>
</p>
<table id="filterTable" class="tableE">
    <thead>
        <tr>
            <% [:login, :email, :name, :state, :created_at].each do |field| %>
            <th scope="col">
                <%= link_to_sortable_column_header(field, @order_by, @sort_order,
                I18n.t("tog_user.model.#{field}")) %>
            </th>
            <% end %>
            <th scope="col">
            </th>
        </tr>
    </thead>
    <tfoot>
        <tr>
            <td colspan="5" class="info_results">
                <span class="info_items"><%= page_entries_info @users %></span>
                <span class="pages_navigation right"><%= will_paginate @users, :container => false %>
                </span>
            </td>
        </tr>
    </tfoot>
    <tbody>
        <% @users.each do |user| %>
        <tr<%= cycle(' class="pair"','') -%>>
            <td nowrap="nowrap">
                <%= link_to I18n.t("tog_user.model.login"), hijack_admin_user_path(user), :title =>  "#{I18n.t('tog_user.model.login')} #{user.email}" -%>
            </td>
            <td>
                <strong><%= link_to user.login, edit_admin_user_url(user), {:title => I18n.t("tog_user.admin.edit_user")} -%></strong>
            </td>
            <td nowrap="nowrap">
                <%= link_to user.profile.full_name, member_profile_path(user.profile) -%>
            </td>
            <td>
                <%= I18n.t("tog_user.model.states.#{user.aasm_current_state}") %>
            </td>
            <td nowrap="nowrap">
                <%= I18n.l(user.created_at, :format => :long) -%>
            </td>
        </tr>
        <% end %>
    </tbody>
</table>

