<% if local_assigns[:show_all] and show_all == true %>
<% comments = commentable.comments %>
<% else %>
<% comments = commentable.comments.to(1) %>
<% end %>
<div class="portlet portletI">
    <div class="portlet_content">
        <ul>
            <% for comment in comments %>
				<%= render :partial => 'shared/comment', :object => comment %>
            <% end %>
			<% unless commentable.comments.size < 2 or local_assigns[:show_all] %>
			<li id="comments_view_more">
				<%= link_to_function I18n.t('comments.member.view.all', :size => commentable.comments.size) do |page| 
					page[:comments_more].show
					page[:comments_view_more].hide
				end %>
			</li>
			<div id="comments_more" style="display: none;">
			<% for comment in commentable.comments.from(2) %>
				<%= render :partial => 'shared/comment', :object => comment %>
            <% end %>
			</div>
			<% end %>
        </ul>
    </div>
</div>
<!-- /#potlet_featuredPosts -->
<% unless local_assigns[:exclude_add_comment] %>
<%= render :partial => "shared/add_comment", :locals => {:commentable => commentable} %>
<% end %>